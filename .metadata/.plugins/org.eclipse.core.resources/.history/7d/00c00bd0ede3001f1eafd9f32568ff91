package main;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;

public class Producto {
    public static void crearTabla(Connection conexion) throws SQLException {
        Statement stmt = conexion.createStatement();
        String sql = "CREATE TABLE IF NOT EXISTS Producto ("
                + "id_producto INT AUTO_INCREMENT PRIMARY KEY, "
                + "nombre VARCHAR(100), "
                + "precio DOUBLE, "
                + "stock INT)";
        stmt.executeUpdate(sql);
        stmt.close();
    }

    public static void mostrarProductos(Connection conexion) throws SQLException {
	    Statement stmt = conexion.createStatement();
	    String query = "SELECT * FROM Producto";
	    ResultSet rs = stmt.executeQuery(query);
	    
	    System.out.println("\n=== LISTADO DE PRODUCTOS ===");
	    System.out.println("ID | Nombre | Precio | Stock");
	    System.out.println("------------------------------------");
	    
	    while (rs.next()) {
	        System.out.printf("%d | %s | %.2f | %d%n",
	            rs.getInt("id_producto"),
	            rs.getString("nombre"),
	            rs.getDouble("precio"),
	            rs.getInt("stock")
	        );
	    }
	    
	    System.out.println("------------------------------------");
	    
	    
	    System.out.println("\nPresiona Enter para continuar...");
	    Scanner sc = new Scanner(System.in);
	    sc.nextLine();
	    rs.close();
	    stmt.close();
	}

    public static void insertarProducto(Connection conexion) throws SQLException {
    	Statement stmt = conexion.createStatement();
        Scanner sc = new Scanner(System.in);
        System.out.print("Nombre del producto: ");
        String nombre = sc.nextLine();
        
        String BuscarNombre = "SELECT nombre FROM Producto WHERE nombre = " + nombre;
        ResultSet rsProducto = stmt.executeQuery(BuscarNombre);
        
        int idCliente = rsProducto.next() ? rsProducto.getInt("id_cliente") : -1;
        
        if(idCliente != -1) {
        	System.out.println("Producto existente, introduce nuevo stock: ");
            int stock = sc.nextInt();
        	
        }else {
        
        System.out.print("Precio: ");
        double precio = sc.nextDouble();
        System.out.print("Stock: ");
        int stock = sc.nextInt();

        String sql = "INSERT INTO Producto (nombre, precio, stock) VALUES ('" + nombre + "', " + precio + ", " + stock + ")";
        stmt.executeUpdate(sql);
        stmt.close();
        System.out.println("Producto agregado con Ã©xito.");
        }
    }
}

